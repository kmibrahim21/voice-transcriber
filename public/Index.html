<script>
document.getElementById("transBtn").onclick = async () => {
  const formData = new FormData();
  formData.append("audio", audioBlob, "recording.webm");

  document.getElementById("status").innerText = "‚è≥ Uploading & Transcribing...";

  try {
    const res = await fetch("/api/transcribe", {
      method: "POST",
      body: formData,
    });

    const data = await res.json();

    if (data.text) {
      document.getElementById("transcript").innerText = "üìÑ " + data.text;
      document.getElementById("status").innerText = "‚úÖ Transcription done!";
    } else {
      document.getElementById("transcript").innerText = "‚ùå Failed: " + (data.error || "Unknown error");
      document.getElementById("status").innerText = "‚ö†Ô∏è Error!";
    }
  } catch (err) {
    console.error(err);
    document.getElementById("transcript").innerText = "‚ùå Fetch failed!";
    document.getElementById("status").innerText = "‚ö†Ô∏è Error!";
  }
};
</script>
